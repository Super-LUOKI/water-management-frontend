import{d as v,_ as u,s as g,o as h,c as f,a as _,b as e,u as n,i as x,w as d,e as y,f as C,g as L,p as w,n as I,t as S,h as T,j as E,m as V}from"./index-01767a26.js";import{H as $}from"./el-table-column-b72d683e.js";import{f as D}from"./date-a462485d.js";function k(o,t,s){return $.get("/opt",{params:{page:o,page_count:t,opt_type:s}})}const m=v("logs",{state:()=>({logList:[],page:1,pageCount:10,optType:null,total:0,selections:null}),actions:{async fetchLogList(){const o=await k(this.regionId,this.page,this.pageCount,this.username,this.usercode);this.logList=o.data,this.total=o.total}}});const B=o=>(w("data-v-2feb0ac1"),o=o(),I(),o),z={class:"opt-warp"},N={class:"left-opt"},O=B(()=>_("div",{class:"right-opt"},null,-1)),P={__name:"DataOptions",setup(o){const t=m(),{optType:s}=g(t),p=()=>{t.page=1,t.fetchLogList()};return(c,l)=>{const i=C,a=L;return h(),f("div",z,[_("div",N,[e(i,{modelValue:n(s),"onUpdate:modelValue":l[0]||(l[0]=r=>x(s)?s.value=r:null),placeholder:"操作类型"},null,8,["modelValue"]),e(a,{onClick:p},{default:d(()=>[y("查询")]),_:1})]),O])}}},R=u(P,[["__scopeId","data-v-2feb0ac1"]]);const H={class:"table-warp"},j={__name:"ContentTable",setup(o){const t=m(),{logList:s,page:p,pageCount:c}=g(t);return(l,i)=>{const a=T,r=E;return h(),f("div",H,[e(r,{data:n(s),stripe:"",border:"","row-style":{height:"40px"},"cell-style":{padding:"5px"},style:{"font-size":"12px"},"show-overflow-tooltip":""},{default:d(()=>[e(a,{type:"index",label:"#",index:(n(p)-1)*n(c)+1,width:"50"},null,8,["index"]),e(a,{prop:"log_type",label:"操作类型"}),e(a,{prop:"device_code",label:"设备编码"}),e(a,{prop:"operator",label:"操作人"}),e(a,{label:"操作时间"},{default:d(({row:b})=>[_("span",null,S(n(D)(b.operation_time)),1)]),_:1}),e(a,{prop:"ip_address",label:"操作IP"})]),_:1},8,["data"])])}}},q=u(j,[["__scopeId","data-v-7326cafb"]]);const Q={class:"opt-log content-warp"},U={class:"content"},A={class:"pagination-warp"},F={__name:"index",setup(o){const t=m();t.fetchLogList();const{pageCount:s,total:p}=g(t),c=l=>{t.page=l,t.fetchLogList()};return(l,i)=>{const a=V;return h(),f("div",Q,[e(R),_("div",U,[e(q),_("div",A,[e(a,{"page-size":n(s),"pager-count":9,layout:"prev, pager, next",total:n(p),background:"",small:"",onCurrentChange:c},null,8,["page-size","total"])])])])}}},M=u(F,[["__scopeId","data-v-7a4b8948"]]);export{M as default};
